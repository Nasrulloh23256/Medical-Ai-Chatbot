import{r as c,j as e,v as K,$ as U,a as R,m as X}from"./app-DCzU8fPO.js";import{L as E,I as _}from"./label-CeYDUFqG.js";import{T as S}from"./text-link-CFSrhyvS.js";import{u as F,a as J,B as Q}from"./app-logo-icon-DHm6msfP.js";import{c as V,P as W,u as Y,a as L,b as Z}from"./index-B-QgRYCH.js";import{P as I,I as B}from"./index-AVa3EdGz.js";import{C as ee}from"./check-BtmcC-iA.js";import{A as re,L as te}from"./auth-layout-Brspj5Rf.js";/* empty css            */import"./theme-switcher-o2pzdSWf.js";function se(r){const s=c.useRef({value:r,previous:r});return c.useMemo(()=>(s.current.value!==r&&(s.current.previous=s.current.value,s.current.value=r),s.current.previous),[r])}var j="Checkbox",[ae,Ce]=V(j),[oe,N]=ae(j);function ne(r){const{__scopeCheckbox:s,checked:a,children:i,defaultChecked:o,disabled:t,form:x,name:f,onCheckedChange:d,required:b,value:n="on",internal_do_not_use_render:l}=r,[p,k]=Y({prop:a,defaultProp:o??!1,onChange:d,caller:j}),[u,C]=c.useState(null),[v,m]=c.useState(null),h=c.useRef(!1),w=u?!!x||!!u.closest("form"):!0,y={checked:p,disabled:t,setChecked:k,control:u,setControl:C,name:f,form:x,value:n,hasConsumerStoppedPropagationRef:h,required:b,defaultChecked:g(o)?!1:o,isFormControl:w,bubbleInput:v,setBubbleInput:m};return e.jsx(oe,{scope:s,...y,children:ce(l)?l(y):i})}var T="CheckboxTrigger",q=c.forwardRef(({__scopeCheckbox:r,onKeyDown:s,onClick:a,...i},o)=>{const{control:t,value:x,disabled:f,checked:d,required:b,setControl:n,setChecked:l,hasConsumerStoppedPropagationRef:p,isFormControl:k,bubbleInput:u}=N(T,r),C=F(o,n),v=c.useRef(d);return c.useEffect(()=>{const m=t==null?void 0:t.form;if(m){const h=()=>l(v.current);return m.addEventListener("reset",h),()=>m.removeEventListener("reset",h)}},[t,l]),e.jsx(I.button,{type:"button",role:"checkbox","aria-checked":g(d)?"mixed":d,"aria-required":b,"data-state":$(d),"data-disabled":f?"":void 0,disabled:f,value:x,...i,ref:C,onKeyDown:L(s,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:L(a,m=>{l(h=>g(h)?!0:!h),u&&k&&(p.current=m.isPropagationStopped(),p.current||m.stopPropagation())})})});q.displayName=T;var A=c.forwardRef((r,s)=>{const{__scopeCheckbox:a,name:i,checked:o,defaultChecked:t,required:x,disabled:f,value:d,onCheckedChange:b,form:n,...l}=r;return e.jsx(ne,{__scopeCheckbox:a,checked:o,defaultChecked:t,disabled:f,required:x,onCheckedChange:b,name:i,form:n,value:d,internal_do_not_use_render:({isFormControl:p})=>e.jsxs(e.Fragment,{children:[e.jsx(q,{...l,ref:s,__scopeCheckbox:a}),p&&e.jsx(O,{__scopeCheckbox:a})]})})});A.displayName=j;var D="CheckboxIndicator",M=c.forwardRef((r,s)=>{const{__scopeCheckbox:a,forceMount:i,...o}=r,t=N(D,a);return e.jsx(W,{present:i||g(t.checked)||t.checked===!0,children:e.jsx(I.span,{"data-state":$(t.checked),"data-disabled":t.disabled?"":void 0,...o,ref:s,style:{pointerEvents:"none",...r.style}})})});M.displayName=D;var z="CheckboxBubbleInput",O=c.forwardRef(({__scopeCheckbox:r,...s},a)=>{const{control:i,hasConsumerStoppedPropagationRef:o,checked:t,defaultChecked:x,required:f,disabled:d,name:b,value:n,form:l,bubbleInput:p,setBubbleInput:k}=N(z,r),u=F(a,k),C=se(t),v=Z(i);c.useEffect(()=>{const h=p;if(!h)return;const w=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(w,"checked").set,H=!o.current;if(C!==t&&P){const G=new Event("click",{bubbles:H});h.indeterminate=g(t),P.call(h,g(t)?!1:t),h.dispatchEvent(G)}},[p,C,t,o]);const m=c.useRef(g(t)?!1:t);return e.jsx(I.input,{type:"checkbox","aria-hidden":!0,defaultChecked:x??m.current,required:f,disabled:d,name:b,value:n,form:l,...s,tabIndex:-1,ref:u,style:{...s.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});O.displayName=z;function ce(r){return typeof r=="function"}function g(r){return r==="indeterminate"}function $(r){return g(r)?"indeterminate":r?"checked":"unchecked"}function ie({className:r,...s}){return e.jsx(A,{"data-slot":"checkbox",className:J("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:e.jsx(M,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(ee,{className:"size-3.5"})})})}function ge({status:r,canResetPassword:s}){const{data:a,setData:i,errors:o,setError:t,clearErrors:x}=K({email:"",password:"",remember:!1}),[f,d]=c.useState(!1),b=async n=>{var l,p;n.preventDefault(),d(!0),x();try{const u=(await R.post("/api/login",{email:a.email,password:a.password})).data.access_token;if(!u)throw new Error("Token tidak diterima dari server.");localStorage.setItem("access_token",u),R.defaults.headers.common.Authorization=`Bearer ${u}`,X.post(route("login"),{email:a.email,password:a.password,remember:a.remember},{onError:C=>{t(C)}})}catch(k){const u=((p=(l=k.response)==null?void 0:l.data)==null?void 0:p.message)||"Email atau password salah.";t("email",u),d(!1)}};return e.jsxs(re,{title:"Log in to your account",description:"Enter your email and password below to log in",children:[e.jsx(U,{title:"Log in"}),e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:b,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(E,{htmlFor:"email",children:"Email address"}),e.jsx(B,{id:"email",type:"email",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"email",value:a.email,onChange:n=>i("email",n.target.value),placeholder:"email@example.com"}),e.jsx(_,{message:o.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{htmlFor:"password",children:"Password"}),s&&e.jsx(S,{href:route("password.request"),className:"ml-auto text-sm",tabIndex:5,children:"Forgot password?"})]}),e.jsx(B,{id:"password",type:"password",required:!0,tabIndex:2,autoComplete:"current-password",value:a.password,onChange:n=>i("password",n.target.value),placeholder:"Password"}),e.jsx(_,{message:o.password})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ie,{id:"remember",name:"remember",checked:a.remember,onCheckedChange:n=>i("remember",!!n),tabIndex:3}),e.jsx(E,{htmlFor:"remember",children:"Remember me"})]}),e.jsxs(Q,{type:"submit",className:"mt-4 w-full",tabIndex:4,disabled:f,children:[f&&e.jsx(te,{className:"h-4 w-4 animate-spin"}),"Log in"]})]}),e.jsxs("div",{className:"text-muted-foreground text-center text-sm",children:["Don't have an account?"," ",e.jsx(S,{href:route("register"),tabIndex:5,children:"Sign up"})]})]}),r&&e.jsx("div",{className:"mb-4 text-center text-sm font-medium text-green-600",children:r})]})}export{ge as default};
